import { ResultExtractors } from "@ahoo-wang/fetcher";
import { type ApiMetadata, type ApiMetadataCapable, type ParameterRequest, api, attribute, autoGeneratedError, del, get, patch, path, post, request } from "@ahoo-wang/fetcher-decorator";
import { AddUserRequest, ChangePwdRequest, CoSecPrincipal } from "./types";

@api()
export class UserApiClient implements ApiMetadataCapable {
    constructor(public readonly apiMetadata?: ApiMetadata) {
    }

    /**
     * - operationId: `addUser`
     * - path: `/v1/users/{username}`
     */
    @post('/v1/users/{username}')
    addUser(@path('username') username: string, @request() httpRequest: ParameterRequest<AddUserRequest>, @attribute() attributes?: Record<string, any>): Promise<boolean> {
        throw autoGeneratedError(username, httpRequest, attributes);
    }

    /**
     * - operationId: `bindRole`
     * - path: `/v1/users/{username}/role`
     */
    @patch('/v1/users/{username}/role', { resultExtractor: ResultExtractors.Response })
    bindRole(@path('username') username: string, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<Response> {
        throw autoGeneratedError(username, httpRequest, attributes);
    }

    /**
     * - operationId: `changePwd`
     * - path: `/v1/users/{username}/password`
     */
    @patch('/v1/users/{username}/password')
    changePwd(@path('username') username: string, @request() httpRequest: ParameterRequest<ChangePwdRequest>, @attribute() attributes?: Record<string, any>): Promise<boolean> {
        throw autoGeneratedError(username, httpRequest, attributes);
    }

    /**
     * - operationId: `query`
     * - path: `/v1/users`
     */
    @get('/v1/users')
    query(@request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<CoSecPrincipal[]> {
        throw autoGeneratedError(httpRequest, attributes);
    }

    /**
     * - operationId: `removeUser`
     * - path: `/v1/users/{username}`
     */
    @del('/v1/users/{username}')
    removeUser(@path('username') username: string, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<boolean> {
        throw autoGeneratedError(username, httpRequest, attributes);
    }

    /**
     * - operationId: `unlock`
     * - path: `/v1/users/{username}/unlock`
     */
    @del('/v1/users/{username}/unlock')
    unlock(@path('username') username: string, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<boolean> {
        throw autoGeneratedError(username, httpRequest, attributes);
    }
}
