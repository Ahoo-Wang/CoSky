import { type ApiMetadata, type ApiMetadataCapable, type ParameterRequest, api, attribute, autoGeneratedError, path, post, request } from "@ahoo-wang/fetcher-decorator";
import { CompositeToken, DefaultRefreshTokenCredentials, LoginRequest } from "./types";

@api()
export class AuthenticateApiClient implements ApiMetadataCapable {
    constructor(public readonly apiMetadata?: ApiMetadata) {
    }

    /**
     * - operationId: `login`
     * - path: `/v1/authenticate/{username}/login`
     */
    @post('/v1/authenticate/{username}/login')
    login(@path('username') username: string, @request() httpRequest: ParameterRequest<LoginRequest>, @attribute() attributes?: Record<string, any>): Promise<CompositeToken> {
        throw autoGeneratedError(username, httpRequest, attributes);
    }

    /**
     * - operationId: `refresh`
     * - path: `/v1/authenticate/{username}/refresh`
     */
    @post('/v1/authenticate/{username}/refresh')
    refresh(@path('username') username: string, @request() httpRequest: ParameterRequest<DefaultRefreshTokenCredentials>, @attribute() attributes?: Record<string, any>): Promise<CompositeToken> {
        throw autoGeneratedError(username, httpRequest, attributes);
    }
}
