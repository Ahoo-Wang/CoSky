import {ResultExtractors} from "@ahoo-wang/fetcher";
import {
    type ApiMetadata,
    type ApiMetadataCapable,
    type ParameterRequest,
    api,
    attribute,
    autoGeneratedError,
    del,
    get,
    path,
    post,
    put,
    request
} from "@ahoo-wang/fetcher-decorator";
import {Config, ConfigHistory, ConfigVersion, ImportResponse} from "./types";

@api()
export class ConfigApiClient implements ApiMetadataCapable {
    constructor(public readonly apiMetadata?: ApiMetadata) {
    }

    /**
     * - operationId: `exportZip`
     * - path: `/v1/namespaces/{namespace}/configs/export`
     */
    @get('/v1/namespaces/{namespace}/configs/export', {resultExtractor: ResultExtractors.Blob})
    exportZip(@path('namespace') namespace: string, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<Blob> {
        throw autoGeneratedError(namespace, httpRequest, attributes);
    }

    /**
     * - operationId: `getConfig`
     * - path: `/v1/namespaces/{namespace}/configs/{configId}`
     */
    @get('/v1/namespaces/{namespace}/configs/{configId}')
    getConfig(@path('namespace') namespace: string, @path('configId') configId: string, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<Config> {
        throw autoGeneratedError(namespace, configId, httpRequest, attributes);
    }

    /**
     * - operationId: `getConfigHistory`
     * - path: `/v1/namespaces/{namespace}/configs/{configId}/versions/{version}`
     */
    @get('/v1/namespaces/{namespace}/configs/{configId}/versions/{version}')
    getConfigHistory(@path('namespace') namespace: string, @path('configId') configId: string, @path('version') version: number, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<ConfigHistory> {
        throw autoGeneratedError(namespace, configId, version, httpRequest, attributes);
    }

    /**
     * - operationId: `getConfigs`
     * - path: `/v1/namespaces/{namespace}/configs`
     */
    @get('/v1/namespaces/{namespace}/configs')
    getConfigs(@path('namespace') namespace: string, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<string[]> {
        throw autoGeneratedError(namespace, httpRequest, attributes);
    }

    /**
     * - operationId: `getConfigVersions`
     * - path: `/v1/namespaces/{namespace}/configs/{configId}/versions`
     */
    @get('/v1/namespaces/{namespace}/configs/{configId}/versions')
    getConfigVersions(@path('namespace') namespace: string, @path('configId') configId: string, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<ConfigVersion[]> {
        throw autoGeneratedError(namespace, configId, httpRequest, attributes);
    }

    /**
     * - operationId: `importZip`
     * - path: `/v1/namespaces/{namespace}/configs`
     */
    @post('/v1/namespaces/{namespace}/configs', {
        headers: {
            'Content-Type': 'multipart/form-data'
        }
    })
    importZip(@path('namespace') namespace: string, @request() httpRequest: ParameterRequest<FormData>, @attribute() attributes?: Record<string, any>): Promise<ImportResponse> {
        throw autoGeneratedError(namespace, httpRequest, attributes);
    }

    /**
     * - operationId: `removeConfig`
     * - path: `/v1/namespaces/{namespace}/configs/{configId}`
     */
    @del('/v1/namespaces/{namespace}/configs/{configId}')
    removeConfig(@path('namespace') namespace: string, @path('configId') configId: string, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<boolean> {
        throw autoGeneratedError(namespace, configId, httpRequest, attributes);
    }

    /**
     * - operationId: `rollback`
     * - path: `/v1/namespaces/{namespace}/configs/{configId}/to/{targetVersion}`
     */
    @put('/v1/namespaces/{namespace}/configs/{configId}/to/{targetVersion}')
    rollback(@path('namespace') namespace: string, @path('configId') configId: string, @path('targetVersion') targetVersion: number, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<boolean> {
        throw autoGeneratedError(namespace, configId, targetVersion, httpRequest, attributes);
    }

    /**
     * - operationId: `setConfig`
     * - path: `/v1/namespaces/{namespace}/configs/{configId}`
     */
    @put('/v1/namespaces/{namespace}/configs/{configId}')
    setConfig(@path('namespace') namespace: string, @path('configId') configId: string, @request() httpRequest?: ParameterRequest, @attribute() attributes?: Record<string, any>): Promise<boolean> {
        throw autoGeneratedError(namespace, configId, httpRequest, attributes);
    }
}
